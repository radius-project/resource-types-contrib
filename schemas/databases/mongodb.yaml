type: object
title: MongoDB Database
description: Schema for provisioning a MongoDB database instance on Kubernetes using Terraform.
properties:
  name:
    type: string
    description: The name of the MongoDB database instance.
    pattern: '^[a-zA-Z0-9\-]+$'
  version:
    type: string
    description: MongoDB server version to deploy.
    default: "6.0"
  replicas:
    type: integer
    description: Number of MongoDB replicas.
    minimum: 1
    default: 1
  storage:
    type: object
    description: Storage configuration for MongoDB.
    properties:
      size:
        type: string
        description: Size of the persistent volume claim.
        pattern: '^[0-9]+Gi$'
        default: "10Gi"
      storageClass:
        type: string
        description: Kubernetes storage class to use.
        default: "standard"
    required:
      - size
  credentials:
    type: object
    description: Database credentials for the admin user.
    properties:
      username:
        type: string
        description: Admin username.
        default: "admin"
      password:
        type: string
        description: Admin password.
        minLength: 8
    required:
      - username
      - password
  persistence:
    type: boolean
    description: Whether to persist data using PVCs.
    default: true
  backup:
    type: object
    description: Backup configuration for MongoDB.
    properties:
      enabled:
        type: boolean
        description: Enable/disable backups.
        default: false
      schedule:
        type: string
        description: Cron expression for backup schedule.
        pattern: '^(@(yearly|annually|monthly|weekly|daily|hourly)|(@every .+)|((\*|[0-9]+)(/|-)?)+ .+)$'
  resources:
    type: object
    description: Resource limits and requests.
    properties:
      requests:
        type: object
        properties:
          cpu:
            type: string
            description: Requested CPU.
            default: "250m"
          memory:
            type: string
            description: Requested memory.
            default: "512Mi"
      limits:
        type: object
        properties:
          cpu:
            type: string
            description: CPU limit.
            default: "500m"
          memory:
            type: string
            description: Memory limit.
            default: "1Gi"

required:
  - name
  - version
  - replicas
  - storage
  - credentials
